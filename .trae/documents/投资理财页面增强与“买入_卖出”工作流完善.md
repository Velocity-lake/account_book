## 目标
- 为投资理财的新增/编辑交易与估值日期增加可视日历选择，同时保留手动输入。
- 在账户行右键菜单新增“添加记账”和“修改当前市值”，并让“添加记账”仅针对该账户预填。
- 投资理财首页增加水平滚动条，金额显示取整。
- 在账户列表顶部增加“汇总账户”一行，按所有账户的现金流与估值进行累计与汇总计算（含 ROI/XIRR）。

## 具体改动
### 1. 日历日期选择
- 复用主菜单“记录账单”的日历实现（`ui_record_page.py:331–383`）思路：在弹窗内创建 `Toplevel` 日历窗口，年/月选择与天数格子，选择后回填到输入框。
- 新增位置：
  - `ui_invest_bill_list.py` 的“新增/编辑投资理财交易”弹窗：为“交易日期”右侧加“选择日期”按钮，调用日历弹窗，选择后写回。
  - `ui_investments.py` 的“设置估值”弹窗：为“估值日期”右侧加“选择日期”按钮，同样处理。
- 保留原手动输入（文本框仍可直接输入 `YYYY-MM-DD`）。

### 2. 账户行右键菜单扩展
- `ui_investments.py`：在现有右键菜单（查看账单明细）基础上新增：
  - “添加记账”：打开“投资理财账单列表”的新增弹窗，并预填该账户；保存后刷新汇总。
  - “修改当前市值”：弹出简化对话框，仅输入“当前市值”和“估值日期”（带日历按钮），保存到 `valuations` 后刷新。
- 入口：绑定 `Treeview` 的 `<Button-3>`，根据选中行的账户名执行动作。

### 3. 投资理财首页水平滚动条
- `ui_investments.py`：为账户列表 `Treeview` 添加水平滚动条（`ttk.Scrollbar(orient="horizontal")` + `xscrollcommand`），与现有垂直滚动条一致。

### 4. 金额显示取整
- `ui_investments.py`：所有金额（累计买入/卖出、当前市值、盈亏、汇总）显示为整数（四舍五入取整），ROI/XIRR保持两位小数百分比不变。

### 5. 汇总账户（顶部一行）
- `ui_investments.py`：在刷新时先计算所有账户的合并统计：
  - 现金流：将所有投资账单转换为现金流（`买入`→负，`卖出`→正；旧“转账”记录兼容），估值流：汇总每个账户的估值为正现金流；排序并传入 `xirr` 计算总 XIRR。
  - 指标：
    - 累计买入 = 所有账户买入金额之和
    - 累计卖出 = 所有账户卖出金额之和
    - 当前市值 = 所有账户估值之和
    - 盈亏 = 当前市值 + 累计卖出 − 累计买入
    - ROI = 盈亏 / 累计买入（若累计买入>0）
- 在 `Treeview` 第一行插入 `汇总账户`，其余行为各账户。

## 验证与兼容
- 交易日期与估值日期均可用日历选择与手动输入；保存后页面刷新。
- 右键“添加记账/修改当前市值”均针对选中账户工作；账单新增后影响汇总与 IRR。
- 汇总账户 XIRR 使用合并现金流计算，兼容旧“转账”方向判断。

## 修改范围
- 更新：`ui_invest_bill_list.py`（新增/编辑弹窗日期选择按钮与逻辑）。
- 更新：`ui_investments.py`（右键菜单新增条目、估值快速修改、水平滚动条、取整显示、汇总账户计算与插入）。
- 不改动：`storage.py` 与 `utils.py` 接口（复用当前 `valuations` 与 `xirr/xnpv`）。

请确认是否同意上述改动。你回复“同意”后，我将按此方案实现并联调，确保交互与计算正确。