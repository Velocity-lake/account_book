## 问题原因
- 右侧模块在页面构建时根据默认值`"月份"`创建：`ui_dashboard.py:22`与`ui_dashboard.py:186`，因此先渲染`MonthlyModule`。
- 随后在刷新阶段才恢复上次模式`last_mode`为“日度”：`ui_dashboard.py:274-285`，但没有重建右侧模块，导致单选显示是“日度”，右侧仍是月份网格。

## 修改方案
- 在`DashboardPage.refresh()`中，恢复`last_mode/last_period`后立即同步UI：
  - 调用`self.show_right_module()`重建右侧模块为`DailyModule/MonthlyModule/YearlyModule`：`ui_dashboard.py:1165-1183`。
  - 调用`self.fill_periods()`按当前模式重置期间下拉：`ui_dashboard.py:306-321`。
  - 调用`self.update_controls_visibility()`保证控件显隐一致：`ui_dashboard.py:333-353`。
  - 之后再`self.compute_and_render()`：`ui_dashboard.py:455-492`。
- 仅这一处补调用即可，无需改默认值或删除`build_ui()`里的首次`show_right_module()`，兼容已有逻辑。

## 具体改动（示意）
- `ui_dashboard.py:274-289`内在设置`mode/period`之后增加：
  - `self.show_right_module()`
  - `self.fill_periods()`
  - `self.update_controls_visibility()`
  - 保留已有`self.compute_and_render()`。

## 验证步骤
- 清空或保留`prefs.dashboard.last_mode="日度"`，启动后打开“首页总览”。
- 首次进入应显示日历视图（DailyModule），右侧不再是月份网格。
- 切换“月份/年份”单选，右侧模块与顶部控件、统计图一致更新。
- 点击柱状图与趋势图，弹出的账单列表筛选维度与当前模式一致：`ui_dashboard.py:614-643`、`ui_dashboard.py:820-869`。

## 影响评估
- 仅补齐一次UI同步调用，不改数据结构与持久化逻辑，风险极低。