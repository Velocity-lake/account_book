## 现状与结论
- “新增记账/编辑”使用同一个弹窗 `AddTransactionDialog`（`ui_add_dialog.py`）。我已将该弹窗的“消费类别”改为可输入下拉，并根据“所属类别”联动加载类别清单；该变更同时作用于“新增”和“编辑”两种使用场景。
- 当在账单列表右键编辑保存时，若输入新的类别，系统已在保存前自动将该类别加入类别清单（`ui_bill_list.py:554-569` 插入了 `add_category`）。

## 拟确认与验证
- 在任何页面调用 `AddTransactionDialog` 进行“新增记账”时：
  - 下拉会根据“所属类别”（收入/支出/报销类）显示与账单列表一致的类别；允许手动输入新类别。
  - 保存后若走账单列表的编辑/保存逻辑，类别会被加入到清单；若有单独的“新增保存”路径，我将查看其保存代码并在保存前补充 `add_category(scene, category)`，以保持行为一致。
- 执行编译检查，确保无语法问题。

## 可能的补充
- 若“新增记账”在其它页面有独立保存流程（不是账单列表的编辑通道），我将只在该保存函数里插入相同的 `add_category` 逻辑，并不改动其它行为。请确认是否存在该保存入口，以便我完成联动。