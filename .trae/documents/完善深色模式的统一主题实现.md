## 我的理解
- 你指的“深色模式是忽悠人”是：界面只在少数控件上变暗，但整体仍偏浅色，视觉不统一、对比不足，切换后很多部件没跟随主题。
- 当前实现集中在 `theme.py:setup_theme`，由设置页单选按钮触发（`ui_settings.py`），首次在入口应用（`app.py`）。部分页面存在硬编码颜色（如红/绿），不随主题变化。

## 问题定位（基于代码检索）
- 主题入口：`app.py:14-18` 首次应用；设置页触发：`ui_settings.py:141-151`；单选控件：`ui_settings.py:34-45`。
- 样式集中：`theme.py` 定义 `TLabel/Primary.TButton/Secondary.TButton/Sidebar.TButton/Treeview/...`；未覆盖 `TFrame/TNotebook/TCombobox/TEntry/TScrollbar` 等容器与输入类控件。
- 硬编码颜色：在部分页面直接写 `foreground="#FF0000"/"#00FF00"`（如仪表页），与主题脱钩。

## 修改思路
- 扩充分层调色板：在 `theme.py` 增加 `surface/bg/fg/muted/border/hover/selected` 等 token 的深浅配对。
- 全面补齐样式：为 `TFrame/TNotebook/TCombobox/TEntry/TScrollbar/TMenubutton` 定义样式和 `map`；Treeview 增加悬停与选中配色，保证对比度。
- 消除硬编码：扫描并把直接写死的 `foreground/background` 改为使用已命名样式或从调色板取色。
- 统一容器背景：窗口与所有 `Frame`/主容器背景使用调色板 `bg/surface`；尽量使用 `ttk.Frame` 并指定 `style`。
- 可靠切换：保留 `SettingsPage.on_theme_change` 流程，`setup_theme(...)` 后强制刷新顶层所有子控件以应用新样式。
- 可访问性：保证文本与背景对比度≥4.5:1，表格选中项与非选中项清晰可辨。

## 验证
- 在“软件设置”页切换浅/深色，检查：整体背景、文本、输入框、下拉、分页、滚动条、表格、侧边栏是否一致变更。
- 手动检查硬编码场景（红/绿状态）在深色下仍清晰；必要时使用主题内的语义色。

如果你同意以上理解与处理方案，我将在你的确认后开始修改并逐步提交变更。